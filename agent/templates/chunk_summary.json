{
    "id": 22,
    "title": {
        "en": "Chunk Summary",
        "zh": "总结切片"
    },
    "description": {
        "en": "This template uses an LLM to generate chunk summaries for building text and vector indexes. During retrieval, summaries enhance matching, and the original chunks are returned as results.",
        "zh": "此模板利用大模型生成切片摘要，并据此建立全文索引与向量。检索时以摘要提升匹配效果，最终召回对应的原文切片。"
    },
    "canvas_type": "Ingestion Pipeline",
    "canvas_category": "dataflow_canvas",
    "dsl": {
        "components": {
            "File": {
                "obj": {
                    "component_name": "File",
                    "params": {}
                },
                "downstream": [
                    "Parser:HipSignsRhyme"
                ],
                "upstream": []
            },
            "Parser:HipSignsRhyme": {
                "obj": {
                    "component_name": "Parser",
                    "params": {
                        "outputs": {
                            "html": {
                                "type": "string",
                                "value": ""
                            },
                            "json": {
                                "type": "Array<object>",
                                "value": []
                            },
                            "markdown": {
                                "type": "string",
                                "value": ""
                            },
                            "text": {
                                "type": "string",
                                "value": ""
                            }
                        },
                        "setups": {
                            "pdf": {
                                "output_format": "json",
                                "suffix": [
                                    "pdf"
                                ],
                                "parse_method": "DeepDOC"
                            },
                            "spreadsheet": {
                                "output_format": "html",
                                "suffix": [
                                    "xls",
                                    "xlsx",
                                    "csv"
                                ]
                            },
                            "image": {
                                "output_format": "text",
                                "suffix": [
                                    "jpg",
                                    "jpeg",
                                    "png",
                                    "gif"
                                ],
                                "parse_method": "ocr"
                            },
                            "email": {
                                "output_format": "text",
                                "suffix": [
                                    "eml",
                                    "msg"
                                ],
                                "fields": [
                                    "from",
                                    "to",
                                    "cc",
                                    "bcc",
                                    "date",
                                    "subject",
                                    "body",
                                    "attachments"
                                ]
                            },
                            "text&markdown": {
                                "output_format": "text",
                                "suffix": [
                                    "md",
                                    "markdown",
                                    "mdx",
                                    "txt"
                                ]
                            },
                            "word": {
                                "output_format": "json",
                                "suffix": [
                                    "doc",
                                    "docx"
                                ]
                            },
                            "slides": {
                                "output_format": "json",
                                "suffix": [
                                    "pptx"
                                ]
                            }
                        }
                    }
                },
                "downstream": [
                    "Splitter:LateExpertsFeel"
                ],
                "upstream": [
                    "File"
                ]
            },
            "Splitter:LateExpertsFeel": {
                "obj": {
                    "component_name": "Splitter",
                    "params": {
                        "chunk_token_size": 512,
                        "delimiters": [
                            "\n"
                        ],
                        "outputs": {
                            "chunks": {
                                "type": "Array<Object>",
                                "value": []
                            }
                        },
                        "overlapped_percent": 0
                    }
                },
                "downstream": [
                    "Extractor:YummyGhostsType"
                ],
                "upstream": [
                    "Parser:HipSignsRhyme"
                ]
            },
            "Tokenizer:EightRocketsAppear": {
                "obj": {
                    "component_name": "Tokenizer",
                    "params": {
                        "fields": "summary",
                        "filename_embd_weight": 0.1,
                        "outputs": {},
                        "search_method": [
                            "embedding",
                            "full_text"
                        ]
                    }
                },
                "downstream": [],
                "upstream": [
                    "Extractor:YummyGhostsType"
                ]
            },
            "Extractor:YummyGhostsType": {
                "obj": {
                    "component_name": "Extractor",
                    "params": {
                        "field_name": "summary",
                        "frequencyPenaltyEnabled": false,
                        "frequency_penalty": 0.7,
                        "llm_id": "deepseek-chat@DeepSeek",
                        "maxTokensEnabled": false,
                        "max_tokens": 256,
                        "outputs": {
                            "chunks": {
                                "type": "Array<Object>",
                                "value": []
                            }
                        },
                        "presencePenaltyEnabled": false,
                        "presence_penalty": 0.4,
                        "prompts": [
                            {
                                "content": "Text to Summarize:\n\n\n{Splitter:LateExpertsFeel@chunks}",
                                "role": "user"
                            }
                        ],
                        "sys_prompt": "Act as a precise summarizer. Your task is to create a summary of the provided content that is both concise and faithful to the original.\n\nKey Instructions:\n1. Accuracy: Strictly base the summary on the information given. Do not introduce any new facts, conclusions, or interpretations that are not explicitly stated.\n2. Language: Write the summary in the same language as the source text.\n3. Objectivity: Present the key points without bias, preserving the original intent and tone of the content. Do not editorialize.\n4. Conciseness: Focus on the most important ideas, omitting minor details and fluff.",
                        "temperature": 0.1,
                        "temperatureEnabled": false,
                        "topPEnabled": false,
                        "top_p": 0.3
                    }
                },
                "downstream": [
                    "Tokenizer:EightRocketsAppear"
                ],
                "upstream": [
                    "Splitter:LateExpertsFeel"
                ]
            }
        },
        "globals": {},
        "graph": {
            "nodes": [
                {
                    "data": {
                        "label": "File",
                        "name": "File"
                    },
                    "id": "File",
                    "measured": {
                        "height": 48,
                        "width": 200
                    },
                    "position": {
                        "x": 50,
                        "y": 200
                    },
                    "sourcePosition": "left",
                    "targetPosition": "right",
                    "type": "beginNode"
                },
                {
                    "data": {
                        "form": {
                            "outputs": {
                                "html": {
                                    "type": "string",
                                    "value": ""
                                },
                                "json": {
                                    "type": "Array<object>",
                                    "value": []
                                },
                                "markdown": {
                                    "type": "string",
                                    "value": ""
                                },
                                "text": {
                                    "type": "string",
                                    "value": ""
                                }
                            },
                            "setups": [
                                {
                                    "fileFormat": "pdf",
                                    "output_format": "json",
                                    "parse_method": "DeepDOC"
                                },
                                {
                                    "fileFormat": "spreadsheet",
                                    "output_format": "html"
                                },
                                {
                                    "fileFormat": "image",
                                    "output_format": "text",
                                    "parse_method": "ocr"
                                },
                                {
                                    "fields": [
                                        "from",
                                        "to",
                                        "cc",
                                        "bcc",
                                        "date",
                                        "subject",
                                        "body",
                                        "attachments"
                                    ],
                                    "fileFormat": "email",
                                    "output_format": "text"
                                },
                                {
                                    "fileFormat": "text&markdown",
                                    "output_format": "text"
                                },
                                {
                                    "fileFormat": "word",
                                    "output_format": "json"
                                },
                                {
                                    "fileFormat": "slides",
                                    "output_format": "json"
                                }
                            ]
                        },
                        "label": "Parser",
                        "name": "Parser"
                    },
                    "dragging": false,
                    "id": "Parser:HipSignsRhyme",
                    "measured": {
                        "height": 412,
                        "width": 200
                    },
                    "position": {
                        "x": 316.99524094206413,
                        "y": 195.39629819663406
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "parserNode"
                },
                {
                    "data": {
                        "form": {
                            "chunk_token_size": 512,
                            "delimiters": [
                                {
                                    "value": "\n"
                                }
                            ],
                            "outputs": {
                                "chunks": {
                                    "type": "Array<Object>",
                                    "value": []
                                }
                            },
                            "overlapped_percent": 0
                        },
                        "label": "Splitter",
                        "name": "Token Splitter"
                    },
                    "dragging": false,
                    "id": "Splitter:LateExpertsFeel",
                    "measured": {
                        "height": 80,
                        "width": 200
                    },
                    "position": {
                        "x": 600.5891036507014,
                        "y": 197.6804920892271
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "splitterNode"
                },
                {
                    "data": {
                        "form": {
                            "fields": "summary",
                            "filename_embd_weight": 0.1,
                            "outputs": {},
                            "search_method": [
                                "embedding",
                                "full_text"
                            ]
                        },
                        "label": "Tokenizer",
                        "name": "Tokenizer"
                    },
                    "dragging": false,
                    "id": "Tokenizer:EightRocketsAppear",
                    "measured": {
                        "height": 120,
                        "width": 200
                    },
                    "position": {
                        "x": 1136.0745258879847,
                        "y": 202.22674640530906
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "tokenizerNode"
                },
                {
                    "data": {
                        "form": {
                            "field_name": "summary",
                            "frequencyPenaltyEnabled": false,
                            "frequency_penalty": 0.7,
                            "llm_id": "deepseek-chat@DeepSeek",
                            "maxTokensEnabled": false,
                            "max_tokens": 256,
                            "outputs": {
                                "chunks": {
                                    "type": "Array<Object>",
                                    "value": []
                                }
                            },
                            "presencePenaltyEnabled": false,
                            "presence_penalty": 0.4,
                            "prompts": "Text to Summarize:\n\n\n{Splitter:LateExpertsFeel@chunks}",
                            "sys_prompt": "Act as a precise summarizer. Your task is to create a summary of the provided content that is both concise and faithful to the original.\n\nKey Instructions:\n1. Accuracy: Strictly base the summary on the information given. Do not introduce any new facts, conclusions, or interpretations that are not explicitly stated.\n2. Language: Write the summary in the same language as the source text.\n3. Objectivity: Present the key points without bias, preserving the original intent and tone of the content. Do not editorialize.\n4. Conciseness: Focus on the most important ideas, omitting minor details and fluff.",
                            "temperature": 0.1,
                            "temperatureEnabled": false,
                            "topPEnabled": false,
                            "top_p": 0.3
                        },
                        "label": "Extractor",
                        "name": "Transformer"
                    },
                    "dragging": false,
                    "id": "Extractor:YummyGhostsType",
                    "measured": {
                        "height": 84,
                        "width": 200
                    },
                    "position": {
                        "x": 870.1728208672672,
                        "y": 201.4516837225608
                    },
                    "selected": false,
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "type": "contextNode"
                },
                {
                    "id": "Note:MightyPandasWatch",
                    "type": "noteNode",
                    "position": {
                        "x": 1128.1996486833773,
                        "y": 342.4601052720091
                    },
                    "data": {
                        "label": "Note",
                        "name": "Index summary",
                        "form": {
                            "text": "Using summary to build both text and vector indexes."
                        }
                    },
                    "sourcePosition": "right",
                    "targetPosition": "left",
                    "dragHandle": ".note-drag-handle",
                    "measured": {
                        "width": 249,
                        "height": 128
                    },
                    "selected": false,
                    "dragging": false
                }
            ],
            "edges": [
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Filestart-Parser:HipSignsRhymeend",
                    "source": "File",
                    "sourceHandle": "start",
                    "target": "Parser:HipSignsRhyme",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Parser:HipSignsRhymestart-Splitter:LateExpertsFeelend",
                    "source": "Parser:HipSignsRhyme",
                    "sourceHandle": "start",
                    "target": "Splitter:LateExpertsFeel",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Splitter:LateExpertsFeelstart-Extractor:YummyGhostsTypeend",
                    "source": "Splitter:LateExpertsFeel",
                    "sourceHandle": "start",
                    "target": "Extractor:YummyGhostsType",
                    "targetHandle": "end"
                },
                {
                    "data": {
                        "isHovered": false
                    },
                    "id": "xy-edge__Extractor:YummyGhostsTypestart-Tokenizer:EightRocketsAppearend",
                    "markerEnd": "logo",
                    "source": "Extractor:YummyGhostsType",
                    "sourceHandle": "start",
                    "style": {
                        "stroke": "rgba(91, 93, 106, 1)",
                        "strokeWidth": 1
                    },
                    "target": "Tokenizer:EightRocketsAppear",
                    "targetHandle": "end",
                    "type": "buttonEdge",
                    "zIndex": 1001
                }
            ]
        },
        "history": [],
        "messages": [],
        "path": [],
        "retrieval": []
    },
    "avatar": "data:image/png;base64,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"
}